<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Tue Nov  9 14:21:33 2010 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<H3>
<p align=center><B>SPECtrum Processing Routines</B>

<p align=center><B>Users Manual</B>

<p align=center><B>Version 3</B>
</H3>

<p align=center><B>(program SPECPR)</B>

<p align=center>by

<p align=center>Roger N. Clark

<p align=center>U.S. Geological Survey, MS 964<br>
Box 25046 Federal Center<br>
Denver, CO 80225-0046<br>
(303) 236-1332</p>

<p align=center>rclark@usgs.gov</p>


<p align=center>USGS Open File Report no. 93-595</p>
228 Pages   <br>
  2 Figures   <br>
  5 Tables   <br>

<hr>

<p align=center>TABLE OF CONTENTS</p>

<p>Acknowledgements

<P>
1    <A HREF="chap01.html"> INTRODUCTION </A><br>
     1.1  Introduction <br>
     1.2  History of Specpr <br>
     1.3  Specpr Design Philosophy <br>
 <br>
2    <A HREF="chap02.html"> PROGRAM STRUCTURE </A><br>
     2.1  Block Diagram of Program Structure <br>
     2.2  File Structure from the Users View <br>
            2.2.1  Deleted point values <br>
            2.2.2  General data file I/O <br>
            2.2.3  Transfer Restrictions <br>
     2.3  File Protection <br>
            2.3.1  Use of Specpr File Protection <br>
     2.4  Command Interpretation <br>
     2.5  Alias Definitions and Substitions <br>
            2.5.1  Creating Alias Words <br>
            2.5.2  Translating Alias Words <br>
            2.5.3  Listing and Saving Alias Words and Translations <br>
            2.5.4  Reading Alias Words into specpr from a File <br>
            2.5.5  Deleting or Writing Over an Alias Word <br>
     2.6  Variable Parsing <br>
     2.7  Order of Substitution and Command Interpretation <br>
            2.7.1  Flow Chart for Command Interpretation Order <br>
     2.8  Specpr File Types and Content <br>
            2.8.1  The Standard File Content <br>
     2.9  &quot;Wavelengths&quot; and other concepts of x-y paired data <br>
     2.10  Help! <br>
 <br>
3    <A HREF="chap03.html"> STARTING SPECPR </A><br>
     3.1  Starting Specpr on Unix <br>
     3.2  HELP <br>
     3.3  Configuring Your Environment <br>
 <br>
4    <A HREF="chap04.html"> IMPORTANT RULES </A><br>
     4.1  Important Rules <br>
     4.2  Protective Locks <br>
     4.3  Make Specpr Files Read Only When Outside Your Directory <br>
     4.4  Bug Reports <br>
     4.5  Keep Track of the Number of Channels and <br>
                      the Wavelength Set! <br>
            4.5.1  Rules of Operation for Channels <br>
            4.5.2  If You Must Change The Number Of Channels <br>
            4.5.3  Setting Channels <br>
 <br>
5    <A HREF="chap05.html"> PROGRAM INITIALIZATION </A><br>
     5.1  Introduction <br>
     5.2  Beginning <br>
     5.3  Protection <br>
     5.4  Observatory Location <br>
     5.5  Device and File Assignments <br>
     5.6  Data File Names <br>
     5.7  Graphics Options <br>
     5.8  Automatically Checking File Protection <br>
 <br>
6    <A HREF="chap06.html"> DEVICE AND FILE ASSIGNMENTS </A><br>
     6.1  Device and File Assignments <br>
     6.2  3D File Types <br>
          6.2.1  3D File Parameters <br>
          6.2.2  3D Algorithm Description <br>
          6.2.3  3D I/O Setup Examples <br>
          6.2.4  3D I/O Suggestions <br>
          6.2.5  3D I/O Demonstration <br>
 <br>
7    <A HREF="chap07.html"> MAIN MENU: PROGRAM OPERATIONS CONTROL </A><br>
     7.1  Introduction <br>
     7.2  Menu Information <br>
     7.3  Listing the Contents of a Data File <br>
     7.4  Terminating Program <br>
     7.5  File Display, Transfer, and Overlap <br>
     7.6  Changing Initialization Parameters <br>
     7.7  Device and File Assignments <br>
     7.8  Extinction Routines <br>
     7.9  Plot Routines (to Hardcopy Plotters) <br>
     7.10  Math Operations <br>
     7.11  Restart Summary <br>
 <br>
8    <A HREF="chap08.html"> MATH OPERATIONS </A><br>
     8.1  Introduction <br>
            8.1.1  Multiple commands from the math command menu. <br>
            8.1.2  Menu Information <br>
     8.2  Subtraction, Multiplication, and Division <br>
     8.3  Addition Routine <br>
     8.4  Error Analysis <br>
     8.5  Algebraic and Trigonometric Functions <br>
     8.6  Special Functions <br>
     8.7  Return from a Math Operation or Function <br>
     8.8  The Titles Routine <br>
     8.9  Band Normalization <br>


<P>
chap08.f10.html
chap08.f11.html
chap08.f12.html
chap08.f13.html
chap08.f14.html
chap08.f15.html
chap08.f16.html
chap08.f17.html
chap08.f18.html
chap08.f19.html
chap08.f1.html
chap08.f20.html
chap08.f21.html
chap08.f22.html
chap08.f23.html
chap08.f24.html
chap08.f25.html
chap08.f2.html
chap08.f39.html
chap08.f3.html
chap08.f40.html
chap08.f41.html
chap08.f42.html
chap08.f43.html
chap08.f44.html
chap08.f45.html
chap08.f46.html
chap08.f47.html
chap08.f48.html
chap08.f49.html
chap08.f4.html
chap08.f50.html
chap08.f5.html
chap08.f6.html
chap08.f7.html
chap08.f8.html
chap08.f9.html

<P>
            8.f1   F1:  List of Special Functions <br>
            8.f2   F2:  Shift <br>
            8.f3   F3:  Sequential Processor <br>
            8.f4   F4:  Sequential Processor (No User Process) <br>
            8.f5   F5:  Continuum Removal <br>
            8.f6   F6:  Black Body Computation <br>
            8.f7   F7:  Smoothing Function <br>
            8.f8   F8:  Channel-File Transpose <br>
            8.f9   F9:  Band Removal (Reflection Method) <br>
<P>
            8.f10  F10:  Sorting Routine <br>
            8.f11  F11:  Lunar Thermal Removal <br>
            8.f12  F12:  Cubic Spline Interpolation <br>
            8.f13  F13:  Merge Two Spectra to One <br>
            8.f14  F14:  Edits Spectral Data and Error Value <br>
            8.f15  F15:  Formats Gaussian Parameter File <br>
            8.f16  F16:  Line Segment Generator <br>
            8.f17  F17:  High To Low Resolution Convolution <br>
            8.f18  F18:  Block Averages and Statistics <br>
            8.f19  F19:  Polynomial Fit (10 Term) <br>
<P>
            8.f20  F20:  Text File Input <br>
                     8.f20.1  Using Function 20 <br>
                     8.f20.2  Setting Up the Text File <br>
                     8.f20.3  Example <br>
<P>
            8.f21  F21:  Calculate N term Polynomial <br>
            8.f22  F22:  Tablet Graphics (TABGRAF) <br>
            8.f23  F23:  Mathmatical Parser <br>
            8.f24  F24:  Star Moon Thermal Removal <br>
            8.f25  F25:  Two Component Areal Mix Least Squares <br>

            8.f26  F26:  not developed yet <br>
            8.f27  F27:  not developed yet <br>
            8.f28  F28:  not developed yet <br>
            8.f29  F29:  not developed yet <br>
            8.f30  F30:  not developed yet <br>
            8.f31  F31:  not developed yet <br>
            8.f32  F32:  not developed yet <br>
            8.f33  F33:  not developed yet <br>
            8.f34  F34:  not developed yet <br>
            8.f35  F35:  not developed yet <br>
            8.f36  F36:  not developed yet <br>
            8.f37  F37:  not developed yet <br>
            8.f38  F38:  not developed yet <br>

            8.f39  F39:  Noise Generator <br>
            8.f40  F40:  least squares between two spectra (Under Dev.) <br>
            8.f41  F41:  Binning Routine (Under Development) <br>
            8.f42  F42:  Fit Band Profile from a Reference Spectrum <br>
            8.f43  F43:  FFT and Inverse FFT <br>
            8.f44  F44:  Segmented Upper Hull Continuum <br>
            8.f45  F45:  Automatic Band Analysis <br>
            8.f46  F46:  Band Analysis Output <br>
            8.f47  F47:  Spectrum Recreation from F46 output <br>
            8.f48  F48:  HP Graphics Terminal Tablet Digitization <br>
            8.f49  F49:  Linear Interpolation <br>
            8.f50  F50:  Wavelength Registration <br>
 <br>
<P>
9    <A HREF="chap09.html"> CRT PLOT ROUTINES </A><br>
     9.1  Introduction <br>
     9.2  Plotting Mode <br>
     9.3  Changing Scale <br>
            9.3.1  Changing Scale by Typing in the Range <br>
            9.3.2  Changing Scale by Graphics Sub-Window <br>
     9.4  Line Type <br>
     9.5  Horizontal Axis Labels <br>
     9.6  Changing the Wavelength Set <br>
     9.7  Graphics Cursor Position <br>
     9.8  Interactive Band Analysis <br>
     9.9  Deleting Individual Data Channels <br>
     9.10  Glitch Removal <br>
     9.11  Information Display and Information Change <br>
     9.12  Printer Listings and Printer Plots <br>
     9.13  Multiple Commands in the CRT Plot Routines <br>
     9.14  Exiting the CRT Plot Routines <br>
 <br>
10   <A HREF="chap10.html"> DATA DISPLAY, TRANSFER, AND OVERLAY </A><br>
     10.1  Introduction <br>
     10.2  Data Display <br>
     10.3  File Transfer <br>
             10.3.1  File Tranfer with Plot or Information Change <br>
             10.3.2 Starpack Transfers <br>
     10.4  Overlaying Data Sets <br>
     10.5  Multiple Commands in Data Display Transfer and Overlay <br>
     10.6  Extraction of Data from 3D Files for Display and Transfer <br>
 <br>
11   <A HREF="chap11.html"> DATA FILE LIST </A><br>
     11.1  Introduction <br>
     11.2  Listing Mode <br>
     11.3  CRT Listing Options <br>
     11.4  Printer Listing Options <br>
     11.5  Search Capability <br>
     11.6  Listing Limits <br>
     11.7  Continuing/Ending the List <br>
     11.8  Sample Listing <br>
 <br>
12   <A HREF="chap12.html"> EXTINCTION ROUTINES </A><br>
     12.1  Introduction <br>
     12.2  Starpack List and Display <br>
     12.3  Extinction Calculation <br>
     12.4  CRT Plot <br>
     12.5  Airmass Versus Log Intensity Plots and Deletion <br>
           and Restoration of Runs and Channels <br>
     12.6  Writing a Starpack <br>
     12.7  Starpack Manual History <br>
 <br>
13   <A HREF="chap13.html"> PLOTTING ROUTINES FOR WORK AND PUBLICATION </A><br>
     13.1  Introduction <br>
     13.2  Plotting Mode Type <br>
             13.2.1 User-selected wavelength limits: <br>
     13.3  Vertical Axis Label <br>
     13.4  Delete From All Spectra <br>
     13.5  Scale of Plot <br>
     13.6  Plot Scale Factors <br>
     13.7  Data Set Input and Options <br>
 <br>
14   <A HREF="chap14.html"> RADIATIVE TRANSFER ROUTINES </A><br>
 <br>
15   <A HREF="chap15.html"> STANDALONE UTILITIES </A><br>
     15.1  Introduction <br>
     15.2  Spprint <br>
     15.3  Spfeatures <br>
     15.4  Data Translation <br>
             15.4.1  sptoascii <br>
             15.4.2  asciitosp <br>
             15.4.3  oldsptoascii <br>
             15.4.4  cgastosp <br>
 <br>
APPENDICES <br>
A    SPECPR STANDARD FORMAT OF DATA FILES <br>
B    HOW TO OBTAIN SPECPR <br>
 <br>
 <br>
<p align=center>Acknowledgements</p> <br>

<p>
This manual documents the specpr program. However, the specpr program
itself is the product of many people, some professional programmers,
others scientists and students. The effort to write this manual
pales in comparison to the programming time spent by myself and
many others. Without these people, specpr would have died long ago.
Rodney Kam and Jeff Hoover were programmers at the University of Hawaii
who shaped the software into the Unix environment and converted the
early code from Fortran 66. Rodney and Jeff co-authored the first
version of the specpr users manual in 1982. I often think of Jeff, a
true Unix guru, and wish he were still alive. Lucy McFadden wrote some
of the early special functions.  After I moved to the U.S. Geological
Survey, specpr underwent many changes and extensions. Programmers at
the University of Hawaii continued to make improvments and bug fixes
in the new version. Kathy Kierein wrote the alias section, added to the
radiative transfer routines and other code. Barry Middlebrook wrote the
3D read routines, a vital contribution for working with the new AVIRIS
and GER imaging spectrometer data. Noel Gorelic wrote many sections,
including the X-windows interface, variable parsing, the graphics
window scaling, the continuum analysis and spectral features special
functions, as well as bug fixes and enhancements to other parts of the
program.  Matthew Klejwa wrote the interactive band analysis routines.
Wendy Calvin extended the radiative transfer routines and wrote the
wavelength registration special function.  Bob Brown and Pam Owensby
have made numerous bug fixes and improvements.  Users contributed a
lot to the development of specpr.  They contributed ideas, found bugs
and ways to work around around them, ways to improve the program and
occasionally fixed the bugs themselves. Some of the more vocal users
(probably because I have worked closely with them) are Gregg Swayze,
Marcia Nelson, Trude King, and Pam Owensby.  A little known fact
is the origin of the name specpr. The name was suggested by Karl
Hinck at the University of Hawaii in 1977 and the name has stuck ever
since. Thanks Karl for a lasting name for a lasting program (smile).
There are probably several people I have forgotten. If I have forgotten
you, I&rsquo;m sorry. It simply reflects the large effort by so many
people that have gone into this program.

<hr>
</body>
</html>
